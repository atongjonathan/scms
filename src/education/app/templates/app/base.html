{% load i18n static %}

{% get_media_prefix as MEDIA_URL %}

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %} {% translate title %} {% endblock %}</title>
    <link
      rel="stylesheet"
      href="https://nordcdn.net/ds/tokens/8.0.0/tokens.custom-properties.css"
      integrity="sha384-e9mOMJSpfGwiX45hcBT+NmrETj3qMJev3mJgb93XR2ydEYLPnR5em5Kr0AUV5o3i"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://nordcdn.net/ds/fonts/3.0.3/fonts.css"
      integrity="sha384-dkSLlcNlq50O3Ils6+x72v07BbSaUb10p9/GEuuIJBcR1d0Nn+lDdvUQoXYz2Dq9"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://nordcdn.net/ds/css/4.1.0/nord.min.css"
      integrity="sha384-9FV4ikmPiDEn1F2NuHi9J8BThbSFNWbgombQ9SNY9Jh0H/WWC40owQakNeJL7Jeg"
      crossorigin="anonymous"
    />

    <!-- Light theme (default) -->
    <link
      rel="stylesheet"
      id="light-theme"
      href="https://nordcdn.net/ds/css/4.1.0/nord.min.css"
      integrity="sha384-9FV4ikmPiDEn1F2NuHi9J8BThbSFNWbgombQ9SNY9Jh0H/WWC40owQakNeJL7Jeg"
      crossorigin="anonymous"
    />

    <!-- Dark theme (conditionally loaded) -->
    <link
      rel="stylesheet"
      id="dark-theme"
      href="https://nordcdn.net/ds/themes/9.0.0/nord-dark.css"
      integrity="sha384-4mfQkitA1YUssjHukrfVhopnhPw9eM2tX8Z05rZ/5NJRmDJN1fQp2gGfwydx2SzL"
      crossorigin="anonymous"
      disabled
    />
    <script
      type="module"
      src="https://nordcdn.net/ds/components/4.5.0/index.js"
      integrity="sha384-OwSkYLIJbTWjgADB5REz7XKEHyyNB+suxkNap4Di9yt7QUOU75f62Z1iA++wyhSn"
      crossorigin="anonymous"
    ></script>

    {% comment %} Tailwind {% endcomment %}
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

  <link
    rel="manifest"
    href="{% static 'app/icons/manifest.json' %}" />
  <link
    rel="stylesheet"
    href="{% static 'app/css/style.css' %}">
  <meta name="msapplication-TileColor" content="#ffffff" />


    <link rel="icon" type="image/png" href='{{ MEDIA_URL }}{{ config.logo }}'>
  
    <meta name="theme-color" content="#ffffff" />
  </head>
  <style>
    :root {
    --n-color-accent: #195e2a;
    --n-avatar-color: #195e2a;
}
  </style>
 <body class="n-typeset">
  <!-- Loading Screen -->
  <div id="loading-screen" class="fixed inset-0 flex items-center justify-center n-background z-50">
    <nord-spinner size="l" label="Loading, please wait"></nord-spinner>

  </div>

  <!-- Main Layout (hidden initially) -->
  <nord-layout id="main-layout" class="hidden">
    {% if not request.user.username %}
    <nord-top-bar slot="top-bar" class="n-color-accent">
      <div class="px-8">
        <nord-button variant="primary" href="{% url 'index' %}">
          {% translate 'Home' %}
        </nord-button>
      </div>
    </nord-top-bar>
    {% endif %}

 
   
    {% block content %}{% endblock %}
    <nord-toast-group>
      {% if messages %}
        {% for message in messages %}
          {% if 'error' in message.tags %}
            <nord-toast class="mx-auto" variant="danger">
              {{ message }}
            </nord-toast>
          {% else %}
            <nord-toast class="mx-auto">
              {{ message }}
            </nord-toast>
          {% endif %}
        {% endfor %}
      {% endif %}
  </nord-toast-group>
  </nord-layout>
  
   
  <script>
    window.addEventListener("load", function () {
      // Hide loading screen
      document.getElementById("loading-screen").classList.add("hidden");
      // Show main content
      document.getElementById("main-layout").classList.remove("hidden");
    });
  </script>
</body>

  <script src='{% static "app/js/theme.js" %}'></script>

</html>
